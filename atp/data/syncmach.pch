KARD  3  4  5  6  7  8  8  8  8  8  8  8  9  9  9 12 13 13 14 14 14 17 17 17 18
     19 19 20 20 20 20 21 21 21 22 23 24 24 26 27 27 29 29 30 30 31 32 33 33 34
     34 34 34 35 35 36 36 36 36 36 37 37 37 39 40 40 41 42 43 43 43 44 45 46 46
     47 48 49 49 49 49 50 51 51 51 52 52 52 53 53 53 53 53 53 54 54 54 55 55 55
     56 56 56 57 57 58 58 59 59 60 60 61 61 62 63 64 64 65 66 67 68 70 71 72 74
     74 74 75 76 79 79 79 79 79 81 81 81 81 81 81 81 81 82 82 82 82 82 82 82 82
     83 83 87 88 89 90
KARG -1 -2  1  1  1  1  1  1  1  1  1 -3 28 -3 -4 -5 -5-15 -1-13-15 32 -6-13 33
     34 35 36 -2 -6 -7 51 -8-13 56 56 -8-18 57-18-19 52 53-19-20 54 55 -9-20 58
     59 -9-21 42-12 -4-12-14-21-24 43-11-23 44-11-14 46 45-10-23-31 47 48-10-24
     49 50-10-25-26-27-22 31-22-30 37-28-30 38 38 39-30-30-31 40 -4-26 41 -4-29
    -27-28-29  2 -4  2 -7  2-15  2-25 29 -3 -7-15 30-30  2  2  2  2  1  1  1  1
      8  9  1  1  3  4  5  6  7 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
     26 27-25 -7 -5-22
KBEG  3  3  3  3  3 23 30 37 44 51 58  3 51 28  3  3 12  3 44  3 28 51  3 28 11
     11 21 63 44 12  3 51  3 28 11 11 28  3 11 28  3 11 21 28  3 11 11  3 28 57
     63 28  3 11  3 12 28  3 36 44 51 28  3 11  3 28 11 11  3 28 12 11 11 28  3
     11 11 28  3 69 75  3 19 12  3 51  3 28 35 62 12 26 50  3 51 28  3 51 28  3
      3 12 44  3 12  3 12  3 12  3 12 11  3  3  3 11  3  3  3  3  3  3  3  3  3
     11 31  3  3 31 41 51 61 71  1 11 21 31 41 51 61 71  1 11 21 31 41 51 61 71
     21 61  3  3  3  3
KEND  8  8  7  7  7 27 34 41 48 55 62  8 56 33  8  8 17  8 49  8 33 56  8 33 20
     20 30 68 49 17  8 56  8 33 20 20 33  8 20 33  8 20 30 33  8 20 20  8 33 62
     68 33  8 20  8 17 33  8 41 49 56 33  8 20  8 33 20 20  8 33 17 20 20 33  8
     20 20 33  8 74 80  8 28 17  8 56  8 33 44 71 21 31 55  8 56 33  8 56 33  8
      8 17 49  7 17  7 17  7 17  7 17 20  8  8  8 20  8  7  7  7  7  7  7  7  7
     20 40  7  7 40 50 60 70 80 10 20 30 40 50 60 70 80 10 20 30 40 50 60 70 80
     30 70  8  8  8  8
KTEX  1  1  1  1  1  1  1  1  1  1  1  1  0  1  1  1  1  1  1  1  1  0  1  1  0
      0  0  0  1  1  1  0  1  1  0  0  1  1  0  1  1  0  0  1  1  0  0  1  1  0
      0  1  1  0  1  1  1  1  1  1  0  1  1  0  1  1  0  0  1  1  1  0  0  1  1
      0  0  1  1  1  1  1  0  1  1  0  1  1  0  0  0  1  1  1  0  1  1  0  1  1
      1  1  1  1  1  1  1  1  1  1  1  0  1  1  1  0  1  1  1  1  1  1  1  1  1
      0  0  1  1  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0  0
      0  0  1  1  1  1
$ERASE
C
C
/TACS
C
C frequency and power set points based on the initial condition
C
11__WREF          1.                                               -1.      1.E3
11__PREF          1.                                               -1.      1.E3
C
C Voltage sensor
C
90__GENA                                                           -1.      1.E3
90__GENB                                                           -1.      1.E3
90__GENC                                                           -1.      1.E3
99VRMSKV  =0.001*SQRT(__GENA*__GENA+__GENB*__GENB+__GENC*__GENC)
 2VRMSPU                  +VRMSKV                 __IKV0
        1.
        1.    .01667  6.944E-5
C
C Frequency sensor
C
92____WG                                                           -1.      1.E3
99__WGPU  =____WG/OMEGAR
 2__DWGN                  -__WGPU         +__WREF     1.
        1.
        1.    .01667  6.944E-5
C
C Governor
C
 2__DPWG                  +__DWGN                 __KGOV
        1.________T2
        1._____T1PT3______T1T3
 0_PMECH  +__DPWG                         +__PREF     1.      __PMAX
C
C Power system stabilizer on frequency; block order does not match IEEE 421.5
C
 1_PSST5                  +__DWGN                 __PSK5
          ______PST5
        1.______PST5
 1_PSST6                  +_PSST5                     1.
        1.
        1.______PST6
 2PSSA12                  +_PSST6                     1.
        1.
        1.______PSA1______PSA2
 1PSST34                  +PSSA12                     1.
        1.______PST3
        1.______PST4
 0PSST12                  +PSST34                     1.
C This limit comes after all the dynamic blocks as in IEEE 421.5
 0___VSI                  +PSST12                     1._VSTMN_VSTMX
C
C Excitation system
C
11_KVREF  ______V0PU                                               -1.      1.E3
 0EXCLIM  -VRMSPU         +_KVREF -___VSI -EXCFBK     1.   -.1    .1
 1_EXCVA                  +EXCTRN                 ____KA -999.  999.
        1.
        1.________TA
 1EXCTRN                  +EXCLIM                     1.
        1.________TC
        1.________TB
 1EXCOUT  -FLDLIM         +_EXCVA                     1.
        1.______TLED
        1.______TLAG
 1EXCFBK                  +EXCOUT                     1. -999.  999.
        0.______KFBK
        1.______TFBK
 0___EFD                  +EXCOUT                     1.            __LIMN__LIMP
C
C Field limiting
C
92___IFD                                                           -1.      1.E3
99_IFDPU  =___IFD/_____IFNOM
 0_KCIFD                  +_IFDPU                 ____KC
99FLDLIM  =_______KLR * (_IFDPU - _______ILR) * (_IFDPU .GT. _______ILR)
 0__LIMN                  -VRMSPU                 _VRMIN
 0VTVRMX                  +VRMSPU                 _VRMAX
 0__LIMP  -_KCIFD                         +VTVRMX     1.
C
C Define output variables
C
98__OUTV  =VRMSPU
98__OUTP  =_PMECH
98__OUTW  =__WGPU
98__OUTF  =___EFD
C
C more outputs for debugging
C
C 98__OUTA  =__DWGN
C 98__OUTB  =__DPWG
C 98__OUT5  =_PSST5
C 98__OUT6  =_PSST6
C 98__OUT2  =PSSA12
C 98__OUT3  =PSST34
C 98__OUT1  =PSST12
C 98__OUTS  =___VSI
C 98__OUTM  =EXCLIM
C 98__OUTC  =_EXCVA
C 98__OUTD  =EXCTRN
C 98__OUTE  =EXCOUT
C 98__OUTG  =EXCFBK
C 98__OUTH  =___IFD
C 98__OUTI  =_IFDPU
C 98__OUTJ  =_KCIFD
C 98__OUTK  =FLDLIM
C 98__OUTL  =__LIMN
C 98__OUTN  =VTVRMX
C 98__OUTO  =__LIMP
C
C Initial conditions
C
77VRMSKV  _____KVINI
77_PMECH          1.
77__WGPU          1.
77_IFDPU  _____IFINI
77__OUTF          1.
77__OUTV          1.
77__OUTP          1.
77__OUTW          1.
C        1         2         3         4         5         6         7         8
C 345678901234567890123456789012345678901234567890123456789012345678901234567890
/BRANCH
  __GENA                    1.E3        .232                                   0
  __GENB                    1.E3        .232                                   0
  __GENC                    1.E3        .232                                   0
/SOURCE
C < n 1><>< Ampl.  >< Freq.  ><Phase/T0><   A1   ><   T1   >< TSTART >< TSTOP  >
58__GENA  _______VPK       60.______ANG0
  __GENB
  __GENC
PARAMETER FITTING             2.
TOLERANCES       50.   1.0E-15   1.0E-16                  20
 1 1 11  2                    ______RMVA_______RKV____AGLINE_______S1D_______S2D
                  1.      1.25                           -1.
________RA________XL________XD________XQ_______XDP_______XQP______XDPP______XQPP
______TDOP______TQOP_____TDOPP_____TQOPP________X0________RN________XN______XCAN
 1                1.______HICO                              _______DSD
BLANK
C 1          4     5     6     7     1     2     3     11    14    15
C 1          4     8     9    13
C 2     2
C 3     2
C 4     2
  51
BLANK
71___EFD
72_PMECH        1
74____WG        2
73___IFD        4
  FINISH
$EOF   User-supplied header cards follow.         04-Apr-23  12:06:20
ARG __GEN, __OUT
ARG ______RMVA, _______RKV, ____AGLINE, _______S1D, _______S2D, _______VPK
ARG ______ANG0, ________RA, ________XL, ________XD, ________XQ, _______XDP
ARG _______XQP, ______XDPP, ______XQPP, ______TDOP, ______TQOP, _____TDOPP
ARG _____TQOPP, ________X0, ________RN, ________XN, ______XCAN, ______HICO
ARG _______DSD
ARG __IKV0, _____KVINI, _____IFINI, _____IFNOM
ARG __KGOV, ________T2, _____T1PT3, ______T1T3, __PMAX
ARG ____KC, _______ILR, _______KLR, _VRMIN, _VRMAX
ARG ______V0PU, ____KA, ________TA, ________TB, ________TC, ______TLED
ARG ______TLAG, ______KFBK, ______TFBK
ARG __PSK5, ______PSA1, ______PSA2, ______PST3, ______PST4, ______PST5
ARG ______PST6, _VSTMN, _VSTMX
NUM ______RMVA, _______RKV, ____AGLINE, _______S1D, _______S2D, _______VPK
NUM ______ANG0, ________RA, ________XL, ________XD, ________XQ, _______XDP
NUM _______XQP, ______XDPP, ______XQPP, ______TDOP, ______TQOP, _____TDOPP
NUM _____TQOPP, ________X0, ________RN, ________XN, ______XCAN, ______HICO
NUM _______DSD
NUM __IKV0, _____KVINI, _____IFINI, _____IFNOM
NUM __KGOV, ________T2, ______T1T3, _____T1PT3, __PMAX
NUM ____KC, _______ILR, _______KLR, _VRMIN, _VRMAX
NUM ______V0PU, ____KA, ________TA, ________TB, ________TC, ______TLED
NUM ______TLAG, ______KFBK, ______TFBK
NUM __PSK5, ______PSA1, ______PSA2, ______PST3, ______PST4, ______PST5
NUM ______PST6, _VSTMN, _VSTMX
DUM __WREF, __PREF, VRMSKV, VRMSPU, ____WG, __DPWG, _PMECH, _PSST5, PSST12
DUM EXCOUT, EXCTRN, _KVREF, __DWGN, EXCLIM, __WGPU, _TORQD, _TORQC, _PSST6
DUM PSSA12, PSST34, ___VSI, ___IFD, _EXCVA, EXCFBK, ___EFD, __LIMN, __LIMP
DUM _KCIFD, VTVRMX, _IFDPU, FLDLIM
